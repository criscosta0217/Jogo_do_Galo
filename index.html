<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Jogo do Galo</title>

  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    body {
      margin: 0;
      display: grid;
      place-items: center;
      min-height: 100vh;
      background: #0f172a;
      color: #e2e8f0;
    }
    .card {
      width: min(520px, 92vw);
      background: #111827;
      border: 1px solid #24304a;
      border-radius: 16px;
      padding: 18px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    h1 { margin: 0 0 10px; font-size: 20px; }
    p { margin: 6px 0 14px; color: #b6c2d9; font-size: 14px; }
    .grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
    }
    button.cell {
      aspect-ratio: 1 / 1;
      font-size: 44px;
      border-radius: 14px;
      border: 1px solid #2b3957;
      background: #0b1220;
      color: #e2e8f0;
      cursor: pointer;
    }
    button.cell:disabled { opacity: .8; cursor: default; }
    .row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 14px;
    }
    .actions button {
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid #2b3957;
      background: #15233a;
      color: #e2e8f0;
      cursor: pointer;
    }
    .actions button:hover { background: #1a2b49; }
  </style>
</head>

<body>
  <div class="card">
    <h1>Jogo do Galo</h1>
    <p>You are <b>X</b>. Computer is <b>O</b>. You always go first.</p>

    <div class="grid" id="grid"></div>

    <div class="row">
      <div id="status">Your turn (X)</div>
      <div class="actions">
        <button id="newGameBtn">New Game</button>
      </div>
    </div>
  </div>

  <script>
    let board = Array(9).fill(" ");
    let gameOver = false;

    const grid = document.getElementById("grid");
    const status = document.getElementById("status");
    const newGameBtn = document.getElementById("newGameBtn");

    const wins = [
      [0,1,2],[3,4,5],[6,7,8],
      [0,3,6],[1,4,7],[2,5,8],
      [0,4,8],[2,4,6]
    ];

    function render() {
      grid.innerHTML = "";
      for (let i = 0; i < 9; i++) {
        const btn = document.createElement("button");
        btn.className = "cell";
        btn.textContent = board[i] === " " ? "" : board[i];
        btn.disabled = gameOver || board[i] !== " ";
        btn.onclick = () => playerMove(i);
        grid.appendChild(btn);
      }
    }

    function checkWinner(letter) {
      return wins.some(line => line.every(i => board[i] === letter));
    }

    function boardFull() {
      return board.every(c => c !== " ");
    }

    function endGame(msg) {
      gameOver = true;
      status.textContent = msg;
      render();
    }

    function findWinningMove(letter) {
      for (const line of wins) {
        const cells = line.map(i => board[i]);
        if (cells.filter(c => c === letter).length === 2 &&
            cells.includes(" ")) {
          return line[cells.indexOf(" ")];
        }
      }
      return -1;
    }

    function playerMove(pos) {
      if (gameOver || board[pos] !== " ") return;

      board[pos] = "X";
      render();

      if (checkWinner("X")) {
        endGame("You win! üéâ");
        return;
      }

      if (boardFull()) {
        endGame("It's a tie ü§ù");
        return;
      }

      status.textContent = "Computer thinking‚Ä¶";
      setTimeout(computerMove, 300);
    }

    function computerMove() {
      let move = findWinningMove("O");   // win
      if (move === -1) move = findWinningMove("X"); // block

      if (move === -1 && board[4] === " ") move = 4; // center

      if (move === -1) {
        const corners = [0,2,6,8].filter(i => board[i] === " ");
        if (corners.length) move = corners[Math.floor(Math.random() * corners.length)];
      }

      if (move === -1) {
        const edges = [1,3,5,7].filter(i => board[i] === " ");
        if (edges.length) move = edges[Math.floor(Math.random() * edges.length)];
      }

      board[move] = "O";
      render();

      if (checkWinner("O")) {
        endGame("Computer wins ü§ñ");
        return;
      }

      if (boardFull()) {
        endGame("It's a tie ü§ù");
        return;
      }

      status.textContent = "Your turn (X)";
    }

    function newGame() {
      board = Array(9).fill(" ");
      gameOver = false;
      status.textContent = "Your turn (X)";
      render();
    }

    newGameBtn.onclick = newGame;

    newGame();
  </script>
</body>
</html>
